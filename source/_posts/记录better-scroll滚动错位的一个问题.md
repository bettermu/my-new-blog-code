---
title: 记录better-scroll滚动错位的一个问题
date: 2018-09-01 22:02:33
tags:
  - better-scroll
  - js
categories:
  - js
---

今天在项目中，使用better-scroll遇到了一个很奇怪的问题，列表滚动加载，一直拉不到容器最底部，经过调试分析，发现，应该是内容实际高度超过了容器动态计算的高度值，所以导致插件认为已经滚动到底部，但其实实际内容还有很多，被容器阻挡在下面，无法滚动上来。   

常规来说，滚动列表的元素一般要求是定高的，这是对比了其他正常的列表页面得到的结论，由于每个li的高度不一样，导致容器计算高度产生了偏差。经过页面样式检查之后发现，li的高度属性被设置了max-height，max-height这个属性，其实是半动态的，这就导致了li的高度是动态变化的，继而导致滚动容器动态计算高度产生了偏差。   

通过将max-height修改成height固定高度之后，这样的问题便不见了。

这里再复习一下，使better-scroll生效的必须项设置：

* 容器必须定高
* 容器外层元素必须只能有一个子元素
* 容器必须设置overflow:hidden属性


