---
title: 记录一个页面width导致的bug
date: 2018-11-13 21:23:16
tags:
  - css
categories:
  - css
---


今天一早来公司，就收到了一个临时需要修改的问题，是这样的，黄山新闻网的维护工作是我们公司接下的，于是后续的修改以及小的修改工作都是我们的工作，今天这个问题是什么呢，需求方是这样描述的：   

新闻网站在PC端上面，浏览是好好的，但是缩小浏览器视口和在手机模式下查看，会出现下图的问题：

PC端：  

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/2.png?raw=true)


手机模式：

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/7.png?raw=true)

从上图可以看到，头部和脚部，并没有根据实际页面宽度而自然伸展，而是被突然截断了，基本可以判断，是横向滚动条导致的，由于头部和脚部没有设置宽度，因此，宽度是auto的。看下图，我们将PC端横向滚动条滚到最开始的位置：

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/1.png?raw=true)  

可以发现，上图滚动条滚到初始位置，也就是页面最初始的状态，那么头部和脚部的宽度是刚刚好适应窗口宽度的，从页面结构，可以看出来，页面的头部，内容，脚部区域都是同级的，并且是100%自适应窗口宽度的：

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/5.png?raw=true)   

但是，肯定有什么元素，固定宽度超出了100%的窗口宽度，经过排查，果然有，如下图：  

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/3.png?raw=true)  

![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/6.png?raw=true)

在内容元素的子元素里，有个定宽的属性设置：

```css
{
  width:1216px;
}

```

嗯，问题就是出在这里，我想大家应该都明白了，为什么pc端是好的，但是缩小窗口和手机端是有问题的，正是因为，pc端最小的窗口最大化，也是1300px以上的，刚好可以包住这个定宽的1216px的元素，因此，页面没有撑出，那么头部和脚部也都是正常的展现效果。  

但是，缩小窗口，当窗口大小小于1216px或者在手机上浏览的时候，出现了横向滚动条，页面被撑开了，但是头部和脚部元素没有定宽，那就会按照窗口宽度初始化样式，但是，滚动条撑出来的部分，就会出现这样的问题，好像被截断了一样。

因此，我们应该怎样去解决呢，其实思路是这样的，现在因为有元素定宽1216px导致页面样式出现了问题，但是对于这种维护的项目，直接更改元素样式是不行的，会造成各种各样的问题，所以只能做增法，也就是增加一些属性，让它变得正常。

那么问题的根源就是，由于页面同级元素都是默认的窗口宽度，但是其中有一个子元素是定宽的，且窗口宽度变化时，可能超过窗口宽度，出现横向滚动条，会导致这些原本按窗口宽度布局的元素，样式在滚动条撑出的部分，会出现断层，因此，我们需要统一在这些同级元素的父元素上面，也就是body上面，加个属性，min-width，这个属性大家都知道，也就是设置元素的最小宽度，当实际宽度小于最小宽度的时候，一律按照最小宽度去展示，当实际宽度超过最小宽度的时候，那么就按照实际宽度去展示。

说白了，设置这个最小宽度，就是为了让滚动条变得正常化，所谓的正常化就是，滚动条的出现原来是由内部元素撑出而出现的，而现在我们让滚动条由body撑出而出现，那么body内部的这些头部，脚部等元素，宽度就能变得可预期了，那么这个min-width的值是多少呢，是的，一定是大于出现问题的边界值，1216px：

```css
{
  min-width:1320px；
}
```

修改后的效果如下图：  

PC端：
![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/4.png?raw=true)

手机端：
![](https://github.com/bettermu/blog-picture-store/blob/master/20181113/8.png?raw=true)

